# 需求文档

## 简介

校内科研实习供需智能匹配与跟踪管理系统是一个面向高校师生的综合性平台，旨在通过大模型Agent技术实现科研项目与学生能力的智能匹配，并提供全流程的实习管理功能。系统支持教师发布科研项目、学生申请实习机会、管理员监控系统运行，通过智能语义分析提升匹配效率和管理智能化水平。

## 术语表

- **系统 (System)**: 校内科研实习供需智能匹配与跟踪管理系统
- **教师用户 (Teacher User)**: 发布科研项目并管理学生申请的教师角色
- **学生用户 (Student User)**: 浏览科研机会并申请实习的学生角色
- **管理员用户 (Admin User)**: 管理系统用户权限和监控系统运行的管理员角色
- **科研项目 (Research Project)**: 教师发布的科研实习机会
- **匹配引擎 (Matching Engine)**: 基于大模型API的智能匹配算法模块
- **申请记录 (Application Record)**: 学生对科研项目的申请信息
- **实习跟踪 (Internship Tracking)**: 实习过程中的进度和状态管理
- **匹配度评分 (Match Score)**: 系统计算的学生与项目的匹配程度数值
- **数据采集模板 (Data Collection Template)**: 标准化的信息录入格式
- **大模型API (LLM API)**: 第三方大语言模型接口（openrouter）

## 需求

### 需求 1: 用户身份认证与权限管理

**用户故事:** 作为系统用户，我希望能够安全地登录系统并根据我的角色访问相应的功能，以便保护个人信息和系统数据安全。

#### 验收标准

1. WHEN 用户提交登录凭证，THE 系统 SHALL 验证用户身份并返回认证结果
2. WHEN 用户认证成功，THE 系统 SHALL 根据用户角色（教师、学生、管理员）加载对应的功能界面
3. WHEN 用户尝试访问未授权的功能，THE 系统 SHALL 拒绝访问并显示权限不足提示
4. WHEN 用户会话超时，THE 系统 SHALL 自动登出用户并要求重新认证

### 需求 2: 科研项目发布与管理

**用户故事:** 作为教师用户，我希望能够发布和管理我的科研项目信息，以便吸引合适的学生申请实习机会。

#### 验收标准

1. WHEN 教师用户创建新项目，THE 系统 SHALL 提供标准化的数据采集模板用于录入项目信息
2. WHEN 教师用户提交项目信息，THE 系统 SHALL 验证必填字段的完整性和数据格式的正确性
3. WHEN 项目信息验证通过，THE 系统 SHALL 将项目数据存储到数据库并生成唯一项目标识
4. WHEN 教师用户请求查看项目列表，THE 系统 SHALL 显示该教师发布的所有项目及其状态
5. WHEN 教师用户编辑已发布项目，THE 系统 SHALL 更新项目信息并保留修改历史记录

### 需求 3: 学生能力档案管理

**用户故事:** 作为学生用户，我希望能够创建和维护我的能力档案，以便系统能够为我推荐合适的科研机会。

#### 验收标准

1. WHEN 学生用户首次登录，THE 系统 SHALL 引导学生填写能力档案模板
2. WHEN 学生用户提交能力档案，THE 系统 SHALL 验证数据完整性并存储到标准化格式
3. WHEN 学生用户更新能力档案，THE 系统 SHALL 保存最新版本并触发匹配引擎重新计算推荐
4. THE 系统 SHALL 存储学生的技能标签、研究兴趣、项目经验和学术背景信息

### 需求 4: 智能匹配与推荐

**用户故事:** 作为学生用户，我希望系统能够根据我的能力档案智能推荐合适的科研项目，以便快速找到匹配的实习机会。

#### 验收标准

1. WHEN 学生用户访问推荐页面，THE 系统 SHALL 调用大模型API分析学生能力与项目需求的语义匹配度
2. WHEN 匹配引擎完成计算，THE 系统 SHALL 返回按匹配度评分排序的项目列表
3. WHEN 系统生成推荐结果，THE 系统 SHALL 为每个推荐项目提供个性化的匹配理由说明
4. WHEN 大模型API调用失败，THE 系统 SHALL 降级使用基于关键词的匹配算法并记录错误日志
5. THE 系统 SHALL 在5秒内完成单次匹配计算并返回至少3个推荐结果

### 需求 5: 申请提交与筛选

**用户故事:** 作为学生用户，我希望能够一键申请感兴趣的科研项目，以便简化申请流程。

#### 验收标准

1. WHEN 学生用户点击申请按钮，THE 系统 SHALL 创建申请记录并关联学生档案与项目信息
2. WHEN 申请提交成功，THE 系统 SHALL 向教师用户发送实时通知
3. WHEN 学生用户重复申请同一项目，THE 系统 SHALL 阻止重复提交并提示已存在申请记录
4. THE 系统 SHALL 记录申请提交时间并初始化申请状态为"待审核"

### 需求 6: 教师端申请智能筛选

**用户故事:** 作为教师用户，我希望系统能够帮我智能筛选学生申请，以便快速识别最合适的候选人。

#### 验收标准

1. WHEN 教师用户查看申请列表，THE 系统 SHALL 显示每个申请的匹配度评分和推荐理由
2. WHEN 教师用户设置筛选条件，THE 系统 SHALL 根据匹配度、技能标签或其他属性过滤申请列表
3. WHEN 教师用户批准申请，THE 系统 SHALL 更新申请状态为"已录取"并通知学生用户
4. WHEN 教师用户拒绝申请，THE 系统 SHALL 更新申请状态为"已拒绝"并通知学生用户

### 需求 7: 实习进度跟踪

**用户故事:** 作为教师用户和学生用户，我希望能够跟踪实习的进度和状态，以便了解实习的执行情况。

#### 验收标准

1. WHEN 申请状态变更为"已录取"，THE 系统 SHALL 自动创建实习跟踪记录
2. WHEN 学生用户或教师用户更新实习进度，THE 系统 SHALL 记录更新时间和内容
3. WHEN 学生用户上传成果文档，THE 系统 SHALL 存储文件并关联到实习跟踪记录
4. THE 系统 SHALL 显示实习的当前阶段、完成百分比和关键里程碑
5. WHEN 实习结束，THE 系统 SHALL 允许教师用户提交最终评价

### 需求 8: 评价与反馈

**用户故事:** 作为教师用户，我希望能够对学生的实习表现进行评价，以便为学生提供反馈并记录实习成果。

#### 验收标准

1. WHEN 教师用户提交评价，THE 系统 SHALL 存储评价内容、评分和提交时间
2. WHEN 评价提交成功，THE 系统 SHALL 通知学生用户查看评价结果
3. THE 系统 SHALL 关联评价记录到对应的实习跟踪记录
4. WHEN 学生用户查看评价，THE 系统 SHALL 显示教师的评分和文字反馈

### 需求 9: 数据统计与可视化

**用户故事:** 作为教师用户和管理员用户，我希望能够查看数据统计分析看板，以便了解系统使用情况和匹配效果。

#### 验收标准

1. WHEN 教师用户访问统计看板，THE 系统 SHALL 显示该教师项目的申请数量、录取率和学生分布
2. WHEN 管理员用户访问统计看板，THE 系统 SHALL 显示全局的用户活跃度、匹配成功率和系统性能指标
3. THE 系统 SHALL 使用图表组件可视化展示统计数据
4. WHEN 用户选择时间范围，THE 系统 SHALL 更新统计数据以反映指定时间段的情况

### 需求 10: 实时消息通知

**用户故事:** 作为系统用户，我希望能够及时收到与我相关的消息通知，以便快速响应重要事件。

#### 验收标准

1. WHEN 发生关键事件（申请提交、状态变更、评价发布），THE 系统 SHALL 生成消息通知
2. WHEN 用户在线，THE 系统 SHALL 通过Web界面实时推送通知消息
3. WHEN 用户查看通知，THE 系统 SHALL 标记通知为已读状态
4. THE 系统 SHALL 在用户界面显示未读通知数量

### 需求 11: 管理员系统监控

**用户故事:** 作为管理员用户，我希望能够监控系统运行状态和数据质量，以便及时发现和解决问题。

#### 验收标准

1. WHEN 管理员用户访问监控面板，THE 系统 SHALL 显示大模型API调用成功率、响应时间和错误日志
2. WHEN 管理员用户查看用户管理页面，THE 系统 SHALL 显示所有用户的角色、状态和注册时间
3. WHEN 管理员用户修改用户权限，THE 系统 SHALL 更新用户角色并立即生效
4. THE 系统 SHALL 记录所有管理员操作的审计日志

### 需求 12: 数据验证与完整性

**用户故事:** 作为系统，我需要确保所有输入数据的有效性和完整性，以便维护数据质量和系统稳定性。

#### 验收标准

1. WHEN 用户提交表单数据，THE 系统 SHALL 验证必填字段是否完整
2. WHEN 用户输入数据格式错误，THE 系统 SHALL 显示具体的错误提示信息
3. THE 系统 SHALL 对邮箱、电话号码等字段应用格式验证规则
4. WHEN 数据验证失败，THE 系统 SHALL 阻止数据提交并保留用户已输入的内容

### 需求 13: 响应式Web界面

**用户故事:** 作为系统用户，我希望能够在不同设备上访问系统，以便随时随地使用系统功能。

#### 验收标准

1. THE 系统 SHALL 提供基于Web的跨平台访问能力
2. WHEN 用户在不同屏幕尺寸的设备上访问，THE 系统 SHALL 自动调整界面布局以适配屏幕
3. WHEN 用户角色不同，THE 系统 SHALL 显示角色自适应的界面布局和功能菜单
4. THE 系统 SHALL 在桌面端和移动端保持一致的交互体验

### 需求 14: 数据库性能优化

**用户故事:** 作为系统，我需要高效地存储和查询数据，以便在用户量增长时保持良好的响应性能。

#### 验收标准

1. THE 系统 SHALL 对频繁查询的字段创建数据库索引
2. WHEN 执行复杂查询，THE 系统 SHALL 在500毫秒内返回结果
3. THE 系统 SHALL 实现数据库连接池以复用数据库连接
4. THE 系统 SHALL 对用户信息、项目信息和申请记录表设置适当的外键约束

### 需求 15: 大模型API集成

**用户故事:** 作为系统，我需要集成大模型API以实现智能匹配功能，以便提供高质量的推荐结果。

#### 验收标准

1. THE 系统 SHALL 支持配置openrouter
2. WHEN 调用大模型API，THE 系统 SHALL 构造包含项目需求和学生能力的语义分析提示词
3. WHEN 大模型API返回结果，THE 系统 SHALL 解析匹配度评分和推荐理由
4. THE 系统 SHALL 实现API调用的超时控制和重试机制
5. WHEN API调用超过3秒未响应，THE 系统 SHALL 终止请求并使用降级策略
