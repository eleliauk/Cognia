# 实施计划

- [x] 1. 项目初始化和基础架构搭建
  - 创建 monorepo 项目结构（frontend、backend、shared）
  - 配置 TypeScript、ESLint、Prettier
  - 设置 Git 仓库和 .gitignore
  - 配置开发环境的 Docker Compose（PostgreSQL、Redis）
  - _需求: 13_

- [ ] 2. 数据库设计与初始化
  - 编写 Prisma schema 定义所有数据模型
  - 创建数据库迁移文件
  - 设置数据库索引和约束
  - 编写数据库种子文件用于开发测试
  - _需求: 12, 14_

- [ ] 3. 后端认证系统实现
  - 实现用户注册和登录 API
  - 集成 JWT 令牌生成和验证
  - 实现密码哈希（bcrypt）
  - 创建认证中间件
  - 实现令牌刷新机制
  - 实现基于角色的访问控制（RBAC）中间件
  - _需求: 1_

- [ ] 4. 用户档案管理模块
- [ ] 4.1 教师档案功能
  - 创建教师档案数据模型和 API
  - 实现教师档案的创建和更新接口
  - 添加数据验证（Zod schemas）
  - _需求: 2_

- [ ] 4.2 学生档案功能
  - 创建学生档案数据模型和 API
  - 实现学生档案的创建和更新接口
  - 实现项目经验的 CRUD 操作
  - 实现档案完整度计算逻辑
  - 添加数据验证
  - _需求: 3, 12_

- [ ] 5. 科研项目管理模块
  - 实现项目 CRUD API 端点
  - 实现项目状态管理逻辑
  - 实现项目搜索和过滤功能
  - 添加项目数据验证
  - 实现教师查看自己项目列表的接口
  - _需求: 2, 12_

- [ ] 6. LangChain 智能匹配引擎
- [ ] 6.1 LangChain 基础配置
  - 安装 LangChain 相关依赖（@langchain/openai, @langchain/core）
  - 创建 LLM 配置文件支持多提供商（Deepseek、文心一言、OpenAI）
  - 实现环境变量配置和提供商选择逻辑
  - _需求: 15_

- [ ] 6.2 匹配提示词和解析器
  - 使用 PromptTemplate 创建匹配提示词模板
  - 使用 Zod 定义匹配结果的输出结构
  - 创建 StructuredOutputParser 解析 LLM 响应
  - _需求: 4, 15_

- [ ] 6.3 匹配引擎核心逻辑
  - 实现 LangChainMatchingEngine 类
  - 实现 calculateMatchScore 方法调用 LLM
  - 实现关键词匹配降级策略
  - 实现 matchStudentToProjects 方法
  - 实现 matchProjectToStudents 方法
  - 添加超时和重试机制
  - _需求: 4, 15_

- [ ] 6.4 匹配结果缓存
  - 集成 Redis 缓存匹配结果
  - 实现缓存键生成和过期策略（1 小时）
  - 实现缓存失效逻辑（档案更新时）
  - _需求: 4_

- [ ] 7. 申请管理模块
  - 实现申请提交 API
  - 实现重复申请检查逻辑
  - 实现申请状态更新接口
  - 实现教师查看项目申请列表
  - 实现学生查看自己的申请列表
  - 在申请中关联匹配度评分
  - _需求: 5, 6_

- [ ] 8. 实习跟踪模块
- [ ] 8.1 实习记录管理
  - 实现实习记录创建（申请通过时自动创建）
  - 实现实习进度更新接口
  - 实现实习状态管理
  - _需求: 7_

- [ ] 8.2 里程碑管理
  - 实现里程碑的 CRUD 操作
  - 实现里程碑完成状态更新
  - _需求: 7_

- [ ] 8.3 文档管理
  - 实现文件上传接口（使用本地存储或云存储）
  - 实现文档列表查询
  - 实现文档删除功能
  - 添加文件类型和大小验证
  - _需求: 7_

- [ ] 9. 评价反馈模块
  - 实现教师评价创建接口
  - 实现评价查询接口
  - 实现评价提交后的通知触发
  - 添加评价数据验证
  - _需求: 8_

- [ ] 10. 实时通知系统
- [ ] 10.1 WebSocket 服务搭建
  - 集成 Socket.io 到 Express 服务器
  - 实现 WebSocket 连接认证
  - 实现用户房间管理（按 userId 分组）
  - _需求: 10_

- [ ] 10.2 通知功能实现
  - 实现通知创建和存储
  - 实现实时推送通知到在线用户
  - 实现通知已读/未读状态管理
  - 实现未读通知数量查询
  - 在关键事件触发通知（申请提交、状态变更、评价发布）
  - _需求: 10_

- [ ] 11. 统计分析模块
- [ ] 11.1 教师统计看板
  - 实现教师项目统计数据聚合
  - 实现申请趋势数据计算
  - 实现学生分布统计
  - _需求: 9_

- [ ] 11.2 管理员统计看板
  - 实现全局用户统计
  - 实现系统性能指标收集
  - 实现匹配效果分析
  - 实现用户增长趋势统计
  - _需求: 9, 11_

- [ ] 12. 管理员功能模块
  - 实现用户列表查询接口
  - 实现用户角色修改接口
  - 实现用户启用/禁用功能
  - 实现审计日志记录
  - 实现系统监控面板数据接口
  - _需求: 11_

- [ ] 13. 前端项目初始化
  - 使用 Vite 创建 React + TypeScript 项目
  - 配置 TailwindCSS
  - 配置 React Router
  - 设置 Zustand 状态管理
  - 配置 React Query
  - 创建基础目录结构
  - _需求: 13_

- [ ] 14. 前端通用组件库
  - 创建 Button、Input、Modal、Card 等基础组件
  - 创建 Table 组件支持排序和分页
  - 创建 Loading 和 Error 状态组件
  - 创建 Toast 通知组件
  - 确保组件响应式设计
  - _需求: 13_

- [ ] 15. 前端布局和导航
  - 创建 Header、Sidebar、Footer 布局组件
  - 实现角色自适应的导航菜单
  - 实现响应式侧边栏（移动端可折叠）
  - 创建 ProtectedRoute 组件
  - _需求: 13_

- [ ] 16. 认证相关页面
- [ ] 16.1 登录页面
  - 创建登录表单 UI
  - 实现登录逻辑和状态管理
  - 实现表单验证
  - 实现错误提示
  - _需求: 1_

- [ ] 16.2 认证状态管理
  - 创建 authStore（Zustand）
  - 实现 token 持久化
  - 实现自动令牌刷新
  - 实现登出逻辑
  - _需求: 1_

- [ ] 17. 教师端页面实现
- [ ] 17.1 教师仪表盘
  - 创建仪表盘页面布局
  - 显示项目概览统计
  - 显示最近申请列表
  - 集成数据可视化图表（Recharts）
  - _需求: 2, 9_

- [ ] 17.2 项目管理页面
  - 创建项目列表页面
  - 实现项目创建表单
  - 实现项目编辑功能
  - 实现项目删除功能
  - 实现项目状态切换
  - _需求: 2_

- [ ] 17.3 申请管理页面
  - 创建申请列表页面
  - 显示每个申请的匹配度评分和理由
  - 实现申请筛选和排序功能
  - 实现申请批准/拒绝操作
  - _需求: 6_

- [ ] 17.4 实习跟踪页面
  - 创建实习列表页面
  - 实现实习详情查看
  - 实现进度更新功能
  - 实现里程碑管理
  - 实现评价提交表单
  - _需求: 7, 8_

- [ ] 18. 学生端页面实现
- [ ] 18.1 学生仪表盘
  - 创建仪表盘页面布局
  - 显示推荐项目卡片
  - 显示申请状态概览
  - 显示档案完整度提示
  - _需求: 3, 4_

- [ ] 18.2 个人档案页面
  - 创建档案编辑表单
  - 实现技能标签输入
  - 实现项目经验的添加/编辑/删除
  - 实时显示档案完整度
  - 实现表单验证
  - _需求: 3_

- [ ] 18.3 推荐项目页面
  - 创建推荐项目列表页面
  - 显示匹配度评分和推荐理由
  - 实现项目详情查看
  - 实现一键申请功能
  - 显示匹配的技能高亮
  - _需求: 4_

- [ ] 18.4 我的申请页面
  - 创建申请列表页面
  - 显示申请状态和时间线
  - 实现申请撤回功能
  - 显示申请反馈信息
  - _需求: 5_

- [ ] 18.5 实习管理页面
  - 创建实习列表页面
  - 实现进度更新功能
  - 实现文档上传功能
  - 查看教师评价
  - _需求: 7, 8_

- [ ] 19. 管理员端页面实现
- [ ] 19.1 管理员仪表盘
  - 创建全局统计看板
  - 显示用户增长趋势图表
  - 显示系统性能指标
  - 显示匹配效果分析
  - _需求: 9, 11_

- [ ] 19.2 用户管理页面
  - 创建用户列表页面
  - 实现用户搜索和过滤
  - 实现用户角色修改
  - 实现用户启用/禁用
  - _需求: 11_

- [ ] 19.3 系统监控页面
  - 显示 LLM API 调用统计
  - 显示错误日志列表
  - 显示审计日志
  - 实现日志搜索和过滤
  - _需求: 11_

- [ ] 20. WebSocket 实时通信集成
  - 在前端集成 Socket.io-client
  - 实现 WebSocket 连接管理
  - 实现实时通知接收和显示
  - 创建通知铃铛组件显示未读数量
  - 实现通知列表弹窗
  - _需求: 10_

- [ ] 21. API 服务层封装
  - 创建 Axios 实例配置
  - 实现请求拦截器（添加 token）
  - 实现响应拦截器（错误处理）
  - 封装所有 API 调用函数
  - 实现自动令牌刷新逻辑
  - _需求: 1_

- [ ] 22. 错误处理和验证
  - 实现全局错误处理中间件
  - 创建统一的错误响应格式
  - 实现所有 API 的输入验证（Zod）
  - 实现友好的错误提示
  - _需求: 12_

- [ ] 23. 安全加固
  - 配置 Helmet 安全头
  - 实现 CORS 配置
  - 实现 API 速率限制
  - 实现登录速率限制
  - 配置 CSP 策略
  - _需求: 1_

- [ ] 24. 性能优化
  - 实现数据库查询优化（避免 N+1）
  - 配置 Redis 缓存
  - 实现前端代码分割
  - 实现图片懒加载
  - 配置 React Query 缓存策略
  - _需求: 14_

- [ ] 25. 系统集成和端到端测试
  - 编写关键流程的集成测试
  - 测试完整的用户注册到申请流程
  - 测试 LangChain 匹配引擎
  - 测试实时通知功能
  - 测试权限控制
  - _需求: 1, 4, 5, 10_

- [ ] 26. 部署准备
  - 编写 Dockerfile（前端和后端）
  - 编写 docker-compose.yml 生产配置
  - 配置环境变量管理
  - 编写部署文档
  - 配置 CI/CD 流程
  - _需求: 13_

- [ ] 27. 文档和收尾
  - 编写 API 文档
  - 编写用户使用手册
  - 编写开发者文档
  - 创建系统演示视频或截图
  - 代码审查和重构
  - _需求: 所有_
